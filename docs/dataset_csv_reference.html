<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HEBench: External Dataset CSV Format Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HEBench
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dataset_csv_reference.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">External Dataset CSV Format Reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md26">Data Block</a><ul><li class="level2"><a href="#autotoc_md27">Control Line</a></li>
<li class="level2"><a href="#autotoc_md28">Samples</a></li>
<li class="level2"><a href="#autotoc_md29">Notes on Samples</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md30">Comments and Empty Lines</a><ul><li class="level2"><a href="#autotoc_md31">Comments</a></li>
<li class="level2"><a href="#autotoc_md32">Empty Lines</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md33">Padding Samples</a><ul><li class="level2"><a href="#autotoc_md34">Common Usage for Padding</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md35">Example</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_docsrc_dataset_csv_reference"></a></p>
<p>The following defines the format for a file of comma-separated values (CSV) specifying the dataset for a benchmark.</p>
<p>A CSV file is loaded and parsed line by line in order from the first line to the last line of the file. The first line is line 1, the top-most line of the file.</p>
<h1><a class="anchor" id="autotoc_md26"></a>
Data Block</h1>
<p>A CSV dataset file contains one or more data blocks. Below is the defined structure of a data block.</p>
<div class="fragment"><div class="line">&lt;identifier&gt;, &lt;component_index&gt;, &lt;num_samples&gt;, &lt;kind&gt;[, &lt;pad_to_length&gt;[, &lt;pad_value&gt;]]</div>
<div class="line">&lt;sample_0&gt;</div>
<div class="line">&lt;sample_1&gt;</div>
<div class="line">...</div>
<div class="line">&lt;sample_num_samples-1&gt;</div>
</div><!-- fragment --><p>A data block specifies the information for an input or an output along with the data for the samples.</p>
<p>A data block starts with a control line followed by an indicated number of samples of the <code>kind</code> specified by the control line.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Control Line</h2>
<p>The control line specifies the data contained within the data block. It has the following format:</p>
<div class="fragment"><div class="line">&lt;identifier&gt;, &lt;component_index&gt;, &lt;num_samples&gt;, &lt;kind&gt;[, &lt;pad_to_length&gt;[, &lt;pad_value&gt;]]</div>
</div><!-- fragment --><p><code>&lt;identifier&gt;</code> - type: <code>string</code>: Indicates whether the data block refers to an input or an output for the benchmark operation. This must be one of the following:</p><ul>
<li><code>input</code></li>
<li><code>output</code></li>
</ul>
<p><code>&lt;component_index&gt;</code> - type: <code>uint</code>: Specifies the operation input parameter index or component index for the output. This value is a zero-based index and corresponds to the specific index for the operation input parameter or output component as defined for the particular workload operation. See <a class="el" href="tests_overview.html">HEBench Supported Workloads</a> for a list of the supported workloads and their definitions.</p>
<p><code>&lt;num_samples&gt;</code> - type: <code>uint</code>: Indicates how many data samples are in the data block.</p>
<p><code>&lt;kind&gt;</code> - type: <code>string</code>: Specifies the type for each sample in the data block. This must be one of the following:</p><ul>
<li><code>local</code></li>
<li><code>csv</code></li>
</ul>
<p><code>&lt;pad_to_length&gt;</code> - type: <code>uint</code>: Optional argument. Defaults to <code>0</code>.</p>
<p>If <code>&lt;pad_to_length&gt;</code> is <code>0</code>, empty values inside samples will be replaced with <code>&lt;pad_value&gt;</code>; otherwise, the CSV dataset loader will attempt to pad all previously read values with <code>&lt;pad_value&gt;</code>, until the legnth of data since previous pad is, at least, <code>&lt;pad_to_length&gt;</code>. Similarly, if the end of the sample is reached and number of values read is less than <code>&lt;pad_to_length&gt;</code>, the loader will perform the pad for the remainder of the sample. See padding example later.</p>
<p><code>&lt;pad_value&gt;</code> - type: (same as the data type of the benchmark). This is the value that the CSV dataset loader will use when padding samples.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
Samples</h2>
<p>In a data block, each non-comment, non-empty line is considered a data sample. The structure of the sample is based on the <code>&lt;kind&gt;</code> specified in the control line.</p>
<p>These are the possible formats for a sample based on the <code>&lt;kind&gt;</code> argument:</p>
<ul>
<li><p class="startli"><code>local</code>: <code>&lt;sample_i&gt;</code> is a comma-separated list of values. Each element is cast internally to the data type of the input expected for the operation.</p>
<p class="startli">Numeric values are read as is into an element of the sample.</p>
<p class="startli">String values are read and added as multiple elements where each element is the value of the corresponding byte in the string. Samples can mix numeric and string values.</p>
<p class="startli">Values can be enclosed with quotation marks <code>"</code> to group a collection of characters in a string. Values in quotations are automatically interpreted as strings. This is useful when the string value contains commas that should not be considered delimiters. Enclosing quotation marks <b>are not</b> read as part of the value.</p>
<p class="startli">To read a numeric value as a string, a user can enclose it with quotation marks.</p>
<p class="startli">Value delimitation when multiple quotations appear inside a pair of opening and closing qotations is not defined.</p>
<p class="startli">An example of a <code>local</code> sample with 5 elements is:</p>
</li>
</ul>
<div class="fragment"><div class="line">1, 2, 3, 4, 5</div>
</div><!-- fragment --><p>This will be read as <code>[1, 2, 3, 4, 5]</code>.</p>
<p>An example of a <code>local</code> sample including strings is:</p>
<div class="fragment"><div class="line">1, foo, &quot;34&quot;, 5</div>
</div><!-- fragment --><p>This will be read as <code>[1, 102, 111, 111, 51, 52, 5]</code>.</p>
<p><b>IMPORTANT</b>: A local sample is a 1-dimensional vector where each element is a number (strings are converted to numbers, one element per byte). This will be how, once loaded, the data will be laid out in memory. The shape and meaning of the data is given by the benchmark description, configuration file, and the workload definition. For example, in <a class="el" href="matrix_multiplication.html">Matrix Multiplication Workload</a> , the data for a sample is expected to be laid in memory contiguously, in row major order; so, the local sample vector will be this data memory layout.</p>
<ul>
<li><p class="startli"><code>csv</code>: <code>&lt;sample_i&gt;</code> specifies an external CSV file containing data samples. Each data sample in the external CSV file is of type <code>local</code>.</p>
<p class="startli">The format for a <code>&lt;sample_i&gt;</code> is:</p>
</li>
</ul>
<div class="fragment"><div class="line">&lt;filename&gt;[, &lt;from_line&gt;, &lt;num_samples&gt;]</div>
</div><!-- fragment --><p>where</p>
<ul>
<li><code>&lt;filename&gt;</code> - type: <code>string</code>: Name of external CSV file to load. Path to file can be relative to parent file, or absolute. If only the filename is supplied, the entire file is used as input.</li>
<li><code>&lt;from_line&gt;</code> - type: <code>uint</code>: Indicates the line number where the data starts in the file.</li>
<li><code>&lt;num_samples&gt;</code> - type: <code>uint</code>: Specifies how many data samples to read from the external CSV file, starting at the specified line number.</li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
Notes on Samples</h2>
<p>Please, refer to <a class="el" href="glossary.html">Glossary</a> for terms used in this section.</p>
<p>If multiple data blocks correspond to the same input or output component, the samples in each block will be appended to whatever data already exists for the component, in the order in which they are encountered.</p>
<p>All the samples for the same input or output component must have the same number of elements. Otherwise, an exception is raised when validating the dataset.</p>
<p>The number of samples for each output component must be the same and matches the total number of output samples.</p>
<p>The total number of output samples is the same as the number of input samples. The total number of input samples depends on the number of samples per input component as specified by the rules in <a class="el" href="results_order.html">Ordering of Results Based on Input Batch Sizes</a> .</p>
<h1><a class="anchor" id="autotoc_md30"></a>
Comments and Empty Lines</h1>
<p>Blanks at the start and end of a line are ignored.</p>
<h2><a class="anchor" id="autotoc_md31"></a>
Comments</h2>
<p>All lines starting with the <code>#</code> symbol in CSV files are considered comments and therefore are ignored. There are no inline comments.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
Empty Lines</h2>
<p>All empty lines in the CSV files are ignored.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
Padding Samples</h1>
<p>Padding is a feature of the CSV dataset loader that allows users to add duplicate values to a sample without the need to explicitly include them. While providing values with manually added padding is perfectly fine, this automatic padding feature exists as a utility.</p>
<p>If a sample contains empty values, the CSV dataset loader will attempt to pad the read data up to the value specified in the control line by <code>&lt;pad_to_length&gt;</code> with <code>&lt;pad_value&gt;</code>.</p>
<p>For example, see the following data block that specified a <code>&lt;pad_to_length&gt;</code> of <code>4</code> with a <code>&lt;pad_value&gt;</code> of <code>0</code>.</p>
<div class="fragment"><div class="line">input, 2, 1, local, 4, 0</div>
<div class="line">-15, 14, , 1, 2, 3, 4, , foo, , , -3</div>
</div><!-- fragment --><p>When read, the resulting sample parsed will be</p>
<div class="fragment"><div class="line">[-15, 14, 0, 0, 1, 2, 3, 4, 102, 111, 111, 0, 0, 0, 0, 0, -3, 0, 0, 0]</div>
<div class="line">        ^----^            ^^             ^-^^----------^    ^-------^</div>
</div><!-- fragment --><p>Carets were added to signal where padding occurred. Notice that no padding will be added if the read values since last padding match the <code>&lt;pad_to_length&gt;</code>.</p>
<p>The same block with <code>&lt;pad_to_length&gt;</code> set to default <code>0</code> would look a bit different, since the default behavior is to simply replace empty values with <code>&lt;pad_value&gt;</code> regardless of padding:</p>
<div class="fragment"><div class="line">input, 2, 1, local, 0, 0</div>
<div class="line">-15, 14, , 1, 2, 3, 4, , foo, , , -3</div>
</div><!-- fragment --><p>When read, the resulting sample parsed will be</p>
<div class="fragment"><div class="line">[-15, 14, 0, 1, 2, 3, 4, 0, 102, 111, 111, 0, 0, -3]</div>
<div class="line">          ^              ^                 ^  ^</div>
</div><!-- fragment --><p>Carets are marking the empty values converted to <code>&lt;pad_value&gt;</code>.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Common Usage for Padding</h2>
<p>A common usage for the automatic padding is converting collection of words into a sample.</p>
<p>For example, assume we have the collection below.</p>
<div class="fragment"><div class="line">Brazil</div>
<div class="line">Canada</div>
<div class="line">Colombia</div>
<div class="line">Mexico</div>
<div class="line">United States</div>
</div><!-- fragment --><p>We can turn it into a sample with padding as such:</p>
<div class="fragment"><div class="line">input, 1, 1, local, 14, 0</div>
<div class="line">Brazil, , Canada, , Colombia, , Mexico, , United States</div>
</div><!-- fragment --><p>This will read as a single sample with each word encoded as 14 characters contiguous in memory. Words in the sample that have less than 14 characters will be padded with the specified <code>&lt;pad_value&gt;</code> of <code>0</code>. Note that in our example, all words are 13 characters or less, so, they will all feature, at least, one padded character.</p>
<h1><a class="anchor" id="autotoc_md35"></a>
Example</h1>
<p>Main CSV file: </p><div class="fragment"><div class="line"># File name: lr16.csv</div>
<div class="line"># Logistic regression - 16 features</div>
<div class="line"> </div>
<div class="line"># weights</div>
<div class="line">input, 0, 1, csv</div>
<div class="line"># in model.csv file, read 1 sample starting from line 3</div>
<div class="line">model.csv, 3, 1 </div>
<div class="line"> </div>
<div class="line"># bias</div>
<div class="line">input, 1, 1, csv</div>
<div class="line"># in model.csv file, read 1 sample starting from line 4</div>
<div class="line">model.csv, 4, 1 </div>
<div class="line"> </div>
<div class="line"># inputs</div>
<div class="line">input, 2, 3, local</div>
<div class="line">-15, 14, -13, 12, -11, 10, -9, 8, -7, 6, -5, 4, -3, 2, -1, 0 </div>
<div class="line">-15, 14, -13, 12, -11, 10, -9, 8, -7, 6, -5, 4, -3, 2, -1, 0 </div>
<div class="line">-15, 14, -13, 12, -11, 10, -9, 8, -7, 6, -5, 4, -3, 2, -1, 0 </div>
<div class="line"> </div>
<div class="line"># these will be appended to previous data in input 2</div>
<div class="line">input, 2, 2, local</div>
<div class="line">-15, 14, -13, 12, -11, 10, -9, 8, -7, 6, -5, 4, -3, 2, -1, 0 </div>
<div class="line">-15, 14, -13, 12, -11, 10, -9, 8, -7, 6, -5, 4, -3, 2, -1, 0 </div>
<div class="line"> </div>
<div class="line"># ground truths</div>
<div class="line">output, 0, 5, local</div>
<div class="line"># there are 5 ground truth samples because we have 5 input samples</div>
<div class="line">0.000911051 </div>
<div class="line">0.000911051 </div>
<div class="line">0.000911051 </div>
<div class="line">0.000911051 </div>
<div class="line">0.000911051 </div>
</div><!-- fragment --><p> External CSV files:</p>
<div class="fragment"><div class="line"># File name: model.csv </div>
<div class="line"># model features/weights </div>
<div class="line">1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16 </div>
<div class="line"># bias</div>
<div class="line">1</div>
</div><!-- fragment --><hr  />
<p> See <a class="el" href="dataset_loader_overview.html">External Dataset Loader Overview</a> for more information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>

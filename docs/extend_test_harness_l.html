<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HEBench: Adding Latency Category Using Pre-existing Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HEBench
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('extend_test_harness_l.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Adding Latency Category Using Pre-existing Implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md96">Default Latency Workflow</a></li>
<li class="level1"><a href="#directory-structure">Directory Structure</a></li>
<li class="level1"><a href="#autotoc_md97">Implementing Latency Category in a Workload Using BenchmarkLatency</a><ul><li class="level2"><a href="#autotoc_md98">0. Create directory structure to house the workload and the category.</a></li>
<li class="level2"><a href="#autotoc_md99">1. Inherit from BenchmarkLatency.</a></li>
<li class="level2"><a href="#autotoc_md100">2. Implement the Benchmark.</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_docsrc_examples_extend_test_harness_extend_test_harness_l"></a></p>
<p>Class <code><a class="el" href="classhebench_1_1TestHarness_1_1BenchmarkLatency.html" title="Base class for workload benchmarks in the latency category.">hebench::TestHarness::BenchmarkLatency</a></code> offers a default implementation for <b>Latency</b> category. If a Latency category with default workflow needs to be added to a workload, clients should inherit from this class.</p>
<h1><a class="anchor" id="autotoc_md96"></a>
Default Latency Workflow</h1>
<p>The following pseudo-code depicts the default Latency workflow as implemented by <code><a class="el" href="classhebench_1_1TestHarness_1_1BenchmarkLatency.html#aaa586ef06e19b4c269d5fd22c1de7272" title="Executes the benchmark latency test.">hebench::TestHarness::BenchmarkLatency::run()</a></code>. Descendants of class <code><a class="el" href="classhebench_1_1TestHarness_1_1BenchmarkLatency.html" title="Base class for workload benchmarks in the latency category.">hebench::TestHarness::BenchmarkLatency</a></code> will inherit this functionality.</p>
<p>Note: all data is cleaned up and handles are released as appropriate. Boiler plate logic has been omited. Exceptions are thrown on errors. <code>ErrorException</code> objects are used as exceptions with error numbers from backend. Test Harness handles these exceptions as appropriate based on the documentation specified for error codes in the <a class="el" href="APIBridge_overview.html">API Bridge</a>.</p>
<div class="fragment"><div class="line">DataPackCollection packed_params_plain;</div>
<div class="line">DataPackCollection packed_params_cipher;</div>
<div class="line"> </div>
<div class="line">vector&lt;Handle&gt; local_handles;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (encrypted parameters)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// encode the raw parameters data</span></div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_encoded_inputs_cipher;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a4fc50bea04798d1baf8dbad8359f8f10">encode</a>(h_benchmark, &amp;packed_parameters_cipher, &amp;h_encoded_inputs_cipher);</div>
<div class="line">    stopTiming();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// encrypt the encoded data</span></div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_cipher_inputs;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a0487699ebe2558d978890e5effd1e016">encrypt</a>(h_benchmark, h_encoded_inputs, &amp;h_cipher_inputs);</div>
<div class="line">    stopTiming();</div>
<div class="line">    </div>
<div class="line">    local_handles.push_back(h_cipher_inputs);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (plaintext parameters)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// encode the raw parameters data</span></div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_encoded_inputs_plain;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a4fc50bea04798d1baf8dbad8359f8f10">encode</a>(h_benchmark, &amp;packed_parameters_plain, &amp;h_encoded_inputs_plain);</div>
<div class="line">    stopTiming();</div>
<div class="line">    </div>
<div class="line">    local_handles.push_back(h_encoded_inputs_plain);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">assert(!local_handles.empty());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// If benchmark has encrypted parameters:</span></div>
<div class="line"><span class="comment">//   local_handles[0] &lt;=&gt; encrypted data</span></div>
<div class="line"><span class="comment">//   local_handles[1] &lt;=&gt; plaintext data (if plaintext data)</span></div>
<div class="line"><span class="comment">// Else (this is not common since, at least 1 parameter should be encrypted)</span></div>
<div class="line"><span class="comment">//   local_handles[0] &lt;=&gt; plaintext data</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// load encrypted data into backend&#39;s remote to use as input to the operation</span></div>
<div class="line"><a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_remote_inputs;</div>
<div class="line"><a class="code" href="namespacehebench_1_1APIBridge.html#ac4d8486aa63649beac1378e8fa8baf3c">load</a>(h_benchmark,</div>
<div class="line">     &amp;local_handles.data(), local_handles.size()</div>
<div class="line">     &amp;h_remote_inputs);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// prepare parameter indexers for operation</span></div>
<div class="line">ParameterIndexer params[op_params_count];</div>
<div class="line"><span class="keywordflow">for</span> (ParameterIndexer &amp;pi : params)</div>
<div class="line">{</div>
<div class="line">    pi.batch_size = 1;  <span class="comment">// only 1 value used for latency test</span></div>
<div class="line">    pi.value_index = 0; <span class="comment">// starting with the first sample</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// do warm-up iterations</span></div>
<div class="line">repeat <span class="keywordflow">for</span> warm-up iterations</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_remote_result;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a3d07f6b56035cea3fad6fd7005b22de0">operate</a>(h_benchmark, h_remote_inputs, params, &amp;h_remote_result);</div>
<div class="line">    stopTiming();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// operate</span></div>
<div class="line">vector&lt;Handle&gt; h_remote_results;</div>
<div class="line">repeat <span class="keywordflow">for</span> specified time and number of iterations &gt;= 2</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_remote_result;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a3d07f6b56035cea3fad6fd7005b22de0">operate</a>(h_benchmark, h_remote_inputs, params, &amp;h_remote_result);</div>
<div class="line">    stopTiming();</div>
<div class="line">    </div>
<div class="line">    h_remote_results.push_back(h_remote_result);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// postprocess output</span></div>
<div class="line"> </div>
<div class="line">vector&lt;Handle&gt; h_local_results;</div>
<div class="line"><span class="keywordflow">for</span> (<a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_remote_result: h_remote_results)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// retrieve data from backend&#39;s remote and store in host</span></div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_local_result;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a5696b351ec3db4f7f3bc28dfb4ef77f4">store</a>(h_benchmark, h_remote_result, &amp;h_local_result, 1);</div>
<div class="line">    stopTiming();</div>
<div class="line">    h_local_results.push_back(h_local_result);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// operation results are expected to be encrypted</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// decrypt results</span></div>
<div class="line">vector&lt;Handle&gt; h_plain_results;</div>
<div class="line"><span class="keywordflow">for</span> (i = 0; i &lt; h_local_results.size(); ++i)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_plain_result;</div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#a563432d24c94d7b3fdb902a9d2c1e1c3">decrypt</a>(h_benchmark, h_local_results[i], &amp;h_plain_result);</div>
<div class="line">    stopTiming();</div>
<div class="line">    </div>
<div class="line">    h_plain_results.push_back(h_plain_result);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// decode and validate the results</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_plain_result : h_plain_results)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// decode</span></div>
<div class="line">    DataPackCollection packed_raw_result; <span class="comment">// pre-allocated</span></div>
<div class="line">    startTiming();</div>
<div class="line">    <a class="code" href="namespacehebench_1_1APIBridge.html#ad42002b907afda2357a5c28406b30bf5">decode</a>(<a class="code" href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">Handle</a> h_benchmark, h_plain_result, &amp;packed_raw_result);</div>
<div class="line">    stopTiming();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// validate output</span></div>
<div class="line">    <a class="code" href="namespacehebench_1_1TestHarness_1_1SimpleSetIntersection.html#a9f9b2b8453582e18eb571a3af66a9936">validateResult</a>(packed_raw_result);</div>
<div class="line">}</div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a0487699ebe2558d978890e5effd1e016"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a0487699ebe2558d978890e5effd1e016">hebench::APIBridge::encrypt</a></div><div class="ttdeci">ErrorCode encrypt(Handle h_benchmark, Handle h_plaintext, Handle *h_ciphertext)</div><div class="ttdoc">Encrypts a plain text into a cipher text.</div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a1cc432e69cd60c216161fae560d8a6f4"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a1cc432e69cd60c216161fae560d8a6f4">hebench::APIBridge::Handle</a></div><div class="ttdeci">_FlexibleData Handle</div><div class="ttdoc">Encapsulates an opaque handle to backend data.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00595">types.h:595</a></div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a3d07f6b56035cea3fad6fd7005b22de0"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a3d07f6b56035cea3fad6fd7005b22de0">hebench::APIBridge::operate</a></div><div class="ttdeci">ErrorCode operate(Handle h_benchmark, Handle h_remote_packed_params, const ParameterIndexer *p_param_indexers, uint64_t indexers_count, Handle *h_remote_output)</div><div class="ttdoc">Performs the workload operation of the benchmark.</div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a4fc50bea04798d1baf8dbad8359f8f10"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a4fc50bea04798d1baf8dbad8359f8f10">hebench::APIBridge::encode</a></div><div class="ttdeci">ErrorCode encode(Handle h_benchmark, const DataPackCollection *p_parameters, Handle *h_plaintext)</div><div class="ttdoc">Given a pack of parameters in raw, native data format, encodes them into plain text suitable for back...</div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a563432d24c94d7b3fdb902a9d2c1e1c3"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a563432d24c94d7b3fdb902a9d2c1e1c3">hebench::APIBridge::decrypt</a></div><div class="ttdeci">ErrorCode decrypt(Handle h_benchmark, Handle h_ciphertext, Handle *h_plaintext)</div><div class="ttdoc">Decrypts a cipher text into corresponding plain text.</div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a5696b351ec3db4f7f3bc28dfb4ef77f4"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a5696b351ec3db4f7f3bc28dfb4ef77f4">hebench::APIBridge::store</a></div><div class="ttdeci">ErrorCode store(Handle h_benchmark, Handle h_remote, Handle *h_local_packed_params, std::uint64_t local_count)</div><div class="ttdoc">Retrieves the specified data from the backend.</div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_ac4d8486aa63649beac1378e8fa8baf3c"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#ac4d8486aa63649beac1378e8fa8baf3c">hebench::APIBridge::load</a></div><div class="ttdeci">ErrorCode load(Handle h_benchmark, const Handle *h_local_packed_params, std::uint64_t local_count, Handle *h_remote)</div><div class="ttdoc">Loads the specified data from the local host into the remote backend to use as parameter during a cal...</div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_ad42002b907afda2357a5c28406b30bf5"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#ad42002b907afda2357a5c28406b30bf5">hebench::APIBridge::decode</a></div><div class="ttdeci">ErrorCode decode(Handle h_benchmark, Handle h_plaintext, DataPackCollection *p_native)</div><div class="ttdoc">Decodes plaintext data into the appropriate raw, native format.</div></div>
<div class="ttc" id="anamespacehebench_1_1TestHarness_1_1SimpleSetIntersection_html_a9f9b2b8453582e18eb571a3af66a9936"><div class="ttname"><a href="namespacehebench_1_1TestHarness_1_1SimpleSetIntersection.html#a9f9b2b8453582e18eb571a3af66a9936">hebench::TestHarness::SimpleSetIntersection::validateResult</a></div><div class="ttdeci">bool validateResult(IDataLoader::Ptr dataset, const std::uint64_t *param_data_pack_indices, const std::vector&lt; hebench::APIBridge::NativeDataBuffer * &gt; &amp;p_outputs, std::uint64_t k_count, hebench::APIBridge::DataType data_type)</div><div class="ttdef"><b>Definition:</b> <a href="hebench__simple__set__intersection_8cpp_source.html#l00443">hebench_simple_set_intersection.cpp:443</a></div></div>
</div><!-- fragment --><p> <br  />
</p>
<h1><a class="anchor" id="directory-structure"></a>
Directory Structure</h1>
<p>In the current directory hierarchy, Test Harness workloads are located in <code>hebench/test_harness/benchmarks</code>. If our workload is <b>"My Workload"</b>, the preferred method for structuring the directories is to create a directory in this location called <code>MyWorkload</code>. Inside <code>MyWorkload</code>, create directories for each workload category (<code>latency</code>, <code>offline</code>, etc.) supported by "My Workload".</p>
<p>For a directory structure example, look at existing workloads such as Element-wise vector addition <code>EltwiseAdd</code>.</p>
<div class="fragment"><div class="line"><a class="code" href="namespacehebench_1_1cpp_1_1WorkloadParams.html#a79b1a5a359871cd28f1b9608a866831a">EltwiseAdd</a></div>
<div class="line"> |</div>
<div class="line"> --- include</div>
<div class="line"> |</div>
<div class="line"> --- latency</div>
<div class="line"> |   |</div>
<div class="line"> |   --- include</div>
<div class="line"> |   |</div>
<div class="line"> |   --- src</div>
<div class="line"> |</div>
<div class="line"> --- offline</div>
<div class="line"> |   |</div>
<div class="line"> |   --- include</div>
<div class="line"> |   |</div>
<div class="line"> |   --- src</div>
<div class="line"> |</div>
<div class="line"> --- src</div>
<div class="ttc" id="anamespacehebench_1_1cpp_1_1WorkloadParams_html_a79b1a5a359871cd28f1b9608a866831a"><div class="ttname"><a href="namespacehebench_1_1cpp_1_1WorkloadParams.html#a79b1a5a359871cd28f1b9608a866831a">hebench::cpp::WorkloadParams::EltwiseAdd</a></div><div class="ttdeci">VectorSize EltwiseAdd</div><div class="ttdef"><b>Definition:</b> <a href="workload__params_8hpp_source.html#l00625">workload_params.hpp:625</a></div></div>
</div><!-- fragment --><p><em>A good starting point to extend TestHarness is to copy an existing workload and renaming directories and files to match "My Workload".</em></p>
<h1><a class="anchor" id="autotoc_md97"></a>
Implementing Latency Category in a Workload Using BenchmarkLatency</h1>
<p>These steps should provide a guide to add a Latency category test to a workload. Assume the workload in question is <b>"My Workload"</b>.</p>
<p>Refer to implementation of <code>EltwiseAdd</code> as a good example.</p>
<h2><a class="anchor" id="autotoc_md98"></a>
0. Create directory structure to house the workload and the category.</h2>
<p>Create the directory structure to house "My Workload", if not already there. A good starting point to avoid starting from scratch is to copy an existing workload directory to the <code>hebench/test_harness/benchmarks</code> location, such as directory <code>EltwiseAdd</code> and rename to <code>MyWorkload</code>. Rename all files and inner directories in the new directory to match the workload name.</p>
<p>See <a href="#directory-structure">Directory Structure</a> section above for more information.</p>
<h2><a class="anchor" id="autotoc_md99"></a>
1. Inherit from BenchmarkLatency.</h2>
<p>Create the <code>MyWorkloadLatency</code> class that inherits from <code>public <a class="el" href="classhebench_1_1TestHarness_1_1BenchmarkLatency.html" title="Base class for workload benchmarks in the latency category.">hebench::TestHarness::BenchmarkLatency</a></code>.</p>
<p>To inherit from <code><a class="el" href="classhebench_1_1TestHarness_1_1BenchmarkLatency.html" title="Base class for workload benchmarks in the latency category.">hebench::TestHarness::BenchmarkLatency</a></code>, include header <code><a class="el" href="hebench__benchmark__latency_8h.html">hebench_benchmark_latency.h</a></code> located in <code>hebench/test_harness/benchmarks/categories/include</code>.</p>
<h2><a class="anchor" id="autotoc_md100"></a>
2. Implement the Benchmark.</h2>
<h3>i. Initialization.</h3>
<p>During benchmark creation and initialization the framework will call the methods of a benchmark automatically in the following order:</p>
<ul>
<li><code>MyWorkloadLatency::MyWorkloadLatency</code></li>
<li><code>MyWorkloadLatency::init()</code></li>
<li><code>MyWorkloadLatency::postInit()</code></li>
</ul>
<h4>Method init()</h4>
<p>Inherited method <code><a class="el" href="classhebench_1_1TestHarness_1_1PartialBenchmark.html#a1c6fc45c9d1e3b38dd06d4e279f7697c" title="Initializes the partial benchmark members.">hebench::TestHarness::BenchmarkLatency::init()</a></code> is abstract and always must be implemented . This method is provided to perform initialization steps before the backend itself is initialized. It is a dedicated method to provide the ability of polymorphic initialization if required.</p>
<ul>
<li><p class="startli"><b>Create a workload compatible </b> <code><a class="el" href="classhebench_1_1TestHarness_1_1IDataLoader.html">hebench::TestHarness::IDataLoader</a></code></p>
<p class="startli">At any point, during initialization of the benchmark, an object of type <code>IDataLoader::Ptr</code> that is compatible with the workload must be created. It must contain, at least, the input parameters for the operation. For latency category, only one sample per parameter is needed. Ground truth for the operation with the specified samples per parameter is also recommended to be loaded into the <code>IDataLoader</code> object.</p>
<p class="startli">The task of the data loader is to load input samples and corresponding ground truth for the workload operation. In the case where the data loader generates the input data instead of loading from another source (such as storage), the data loader/generator must also precompute the ground truths for each corresponding input sample generated if ground truths are to be preloaded.</p>
<p class="startli">A data loader derived from class <code><a class="el" href="classhebench_1_1TestHarness_1_1PartialDataLoader.html" title="Base class for data loaders and data generators.">hebench::TestHarness::PartialDataLoader</a></code> has a head start on common implementations for trivial interface methods. It also takes care of boiler plate code and memory allocation based on parameter information.</p>
<p class="startli">If random data needs to be generated, class <code><a class="el" href="classhebench_1_1TestHarness_1_1DataGeneratorHelper.html" title="Static helper class to generate vector data for all supported data types.">hebench::TestHarness::DataGeneratorHelper</a></code> can be helpful.</p>
</li>
</ul>
<h4>Method postInit()</h4>
<p>Virtual method <code><a class="el" href="classhebench_1_1TestHarness_1_1PartialBenchmark.html#a35d1003b0e660e5a46d06d1dc5972019" title="Called automatically during initialization after the backend has been initialized.">hebench::TestHarness::BenchmarkLatency::postInit()</a></code> allows initialization that requires the backend to already exist. It provides a default implementation and, unless necessary, an override is not required. If one is provided, however, it is required that the base implementation is called as the first step.</p>
<h3>ii. Override remaining methods.</h3>
<p>Implement the following abstract methods.</p>
<p><code><a class="el" href="classhebench_1_1TestHarness_1_1PartialBenchmarkCategory.html#a0288d04d024d7bd264a749f8900101a9" title="Dataset to be used for operations previously initialized during creation of this object.">hebench::TestHarness::PartialBenchmarkCategory::getDataset()</a></code></p>
<p>Default implementation for the virtual methods below exist, so, override if their default behavior does not match the current benchmark.</p>
<p><em>(optional)</em></p>
<p>Destructor</p>
<p><code><a class="el" href="classhebench_1_1TestHarness_1_1PartialBenchmarkCategory.html#a20e7636f58e8a67333b5574ae985879d" title="Validates the result of an operation against the ground truth.">hebench::TestHarness::PartialBenchmarkCategory::validateResult()</a></code></p>
<p><code><a class="el" href="classhebench_1_1TestHarness_1_1PartialBenchmarkCategory.html#a2edd611c984b2672950d80139732b415" title="Outputs the arguments, expected ground truth, and received result to an output stream.">hebench::TestHarness::PartialBenchmarkCategory::logResult()</a></code></p>
<p><code>hebench::TestHarness::PartialBenchmarkCategory::getStartEventID()</code></p>
<p>See the method descriptions for more information on the expected functionality and default behavior.</p>
<hr  />
<p> <br  />
</p>
<p>At this point, the <code>MyWorkloadLatency</code> class should be completed. Refer to documentation on <a class="el" href="extend_test_harness.html#md_docsrc_examples_extend_test_harness_extend_test_harness">adding a workload to the Test Harness</a> for the final steps to make Test Harness aware of the new class. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>

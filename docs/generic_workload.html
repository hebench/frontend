<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HEBench: Generic Workload</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HEBench
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('generic_workload.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Generic Workload </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md226">Operation Description</a><ul><li class="level2"><a href="#autotoc_md227">Summary</a></li>
<li class="level2"><a href="#autotoc_md228">Operation Parameters</a></li>
<li class="level2"><a href="#autotoc_md229">Result</a></li>
<li class="level2"><a href="#autotoc_md230">Details</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md231">Workloads</a><ul><li class="level2"><a href="#autotoc_md232">Workload Parameters</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md233">Categories</a><ul><li class="level2"><a href="#autotoc_md234">Category Parameters</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md235">Data Type</a></li>
<li class="level1"><a href="#autotoc_md236">Data Layout</a></li>
<li class="level1"><a href="#autotoc_md237">Dataset</a></li>
<li class="level1"><a href="#autotoc_md238">Example</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_docsrc_tests_generic"></a></p>
<p>The <em>Generic Workload</em> is intended as a shortcut to help test and benchmark operations that are not directly supported by HEBench. Therefore, a generic workload does not have a predefined operation with known input parameters and outputs, as well as no way of pre-computing ground truths from a set of inputs. This reduces the need to manually add unsupported workloads to the list of standard workloads directly into the HEBench source code (which requires a fair amount of complex work, obeying several rules, recompilation, testing, and so on, for the new workload to properly function).</p>
<p>To provide support for a generic workload, a backend must provide custom flexible workload parameters representing the expected input and output shapes. To benchmark the backend's generic workload, a Test Harness user must supply values to these workload parameters through a benchmark configuration file. The actual input data and ground truths must be supplied through an external dataset. See <a class="el" href="config_file_reference.html">Benchmark Configuration File Reference</a> and <a class="el" href="dataset_loader_overview.html">External Dataset Loader Overview</a> for details on how to use configuration files and external datasets.</p>
<p>The following describes the settings required to define a generic workload. See an example at the end of this document for a case that shows how a generic workload could be used.</p>
<h1><a class="anchor" id="autotoc_md226"></a>
Operation Description</h1>
<h2><a class="anchor" id="autotoc_md227"></a>
Summary</h2>
<p>This operation is defined as:</p>
<div class="fragment"><div class="line">(ResultComponent[0], ResultComponent[1], ..., ResultComponent[m - 1]) = op(InputParam[0], InputParam[1], ..., InputParam[n - 1])</div>
</div><!-- fragment --><p>for some user-defined bijective function <code>op</code> with <code>n</code> input parameters and an output with <code>m</code> components. Where <code>0 &lt; n &lt; HEBENCH_MAX_OP_PARAMS</code> and <code>m &gt; 0</code>.</p>
<h2><a class="anchor" id="autotoc_md228"></a>
Operation Parameters</h2>
<p>Input: <code>n</code> parameters</p>
<p><code>InputParam</code> is an ordered collection of <code>n</code> vectors.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>0 &lt;= i &lt; n</code>   </td><td class="markdownTableBodyNone"><code>InputParam[i]</code> is a vector of scalars with a user-defined non-zero number of components.   </td></tr>
</table>
<p>The number of components in <code>InputParam[i]</code> does not need to be the same as the number of components in <code>InputParam[j]</code> for <code>i != j</code>.</p>
<h2><a class="anchor" id="autotoc_md229"></a>
Result</h2>
<p>Output: <code>m</code> components</p>
<p><code>ResultComponent</code> is an ordered collection of <code>m</code> vectors.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Output   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>0 &lt;= i &lt; m</code>   </td><td class="markdownTableBodyNone"><code>ResultComponent[i]</code> is a vector of scalars with a user-defined non-zero number of components.   </td></tr>
</table>
<p>The number of components in <code>ResultComponent[i]</code> does not need to be the same as the number of components in <code>ResultComponent[j]</code> for <code>i != j</code>.</p>
<h2><a class="anchor" id="autotoc_md230"></a>
Details</h2>
<p>The operation for a generic workload is a bijective function defined by a user-provided mapping of inputs into outputs. This function is defined by its mapping, its input and output shapes, domain, and image; these definitions are described in a given benchmark configuration and a corresponding external dataset. The configuration file describes the number of inputs <code>n</code>, the number of outputs <code>m</code>, the number of components for each input <code>InputParam[i]</code>, and the number of components for each output <code>ResultComponent[j]</code>. The external dataset provides the mapping of values for all combinations in <code>InputParam</code> into all values in <code>ResultComponent</code>. See <a class="el" href="config_file_reference.html">Benchmark Configuration File Reference</a> and <a class="el" href="dataset_loader_overview.html">External Dataset Loader Overview</a> for details on how to use benchmark configuration files and external datasets.</p>
<h1><a class="anchor" id="autotoc_md231"></a>
Workloads</h1>
<p>This document applies to the following workloads:</p>
<div class="fragment"><div class="line"><span class="comment">// From hebench/api_bridge/types.h</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="namespacehebench.html">hebench</a>:<a class="code" href="namespacehebench_1_1APIBridge.html#aeb7e1cd988a3ca98e5345d5bc90aa733a9acde93875b5a0878d37ee1b2b494cda">APIBridge::Workload::Generic</a></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_aeb7e1cd988a3ca98e5345d5bc90aa733a9acde93875b5a0878d37ee1b2b494cda"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#aeb7e1cd988a3ca98e5345d5bc90aa733a9acde93875b5a0878d37ee1b2b494cda">hebench::APIBridge::Generic</a></div><div class="ttdeci">@ Generic</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00295">types.h:294</a></div></div>
<div class="ttc" id="anamespacehebench_html"><div class="ttname"><a href="namespacehebench.html">hebench</a></div><div class="ttdef"><b>Definition:</b> <a href="hebench__benchmark__category_8h_source.html#l00018">hebench_benchmark_category.h:18</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md232"></a>
Workload Parameters</h2>
<p>Required workload parameters: <code>2 + m + n</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Index   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>0</code>   </td><td class="markdownTableBodyNone"><code>n</code>   </td><td class="markdownTableBodyNone"><code>uint64_t</code>   </td><td class="markdownTableBodyNone">Number of inputs to the operation (number of vectors in collection <code>InputParam</code>).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone"><code>m</code>   </td><td class="markdownTableBodyNone"><code>uint64_t</code>   </td><td class="markdownTableBodyNone">Number of outputs from the operation (number of vectors in collection <code>ResultComponent</code>).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>2</code>   </td><td class="markdownTableBodyNone"><code>length_InputParam0</code>   </td><td class="markdownTableBodyNone"><code>uint64_t</code>   </td><td class="markdownTableBodyNone">Number of components in vector <code>InputParam[0]</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">...   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>n + 1</code>   </td><td class="markdownTableBodyNone"><code>length_InputParam</code><em>n-1</em>   </td><td class="markdownTableBodyNone"><code>uint64_t</code>   </td><td class="markdownTableBodyNone">Number of components in vector <code>InputParam[n - 1]</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>n + 2</code>   </td><td class="markdownTableBodyNone"><code>length_ResultComponent0</code>   </td><td class="markdownTableBodyNone"><code>uint64_t</code>   </td><td class="markdownTableBodyNone">Number of components in vector <code>ResultComponent[0]</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">...   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>m + n + 1</code>   </td><td class="markdownTableBodyNone"><code>length_ResultComponent</code><em>m-1</em>   </td><td class="markdownTableBodyNone"><code>uint64_t</code>   </td><td class="markdownTableBodyNone">Number of components in vector <code>ResultComponent[m - 1]</code>.   </td></tr>
</table>
<p>Above parameters are required for the workload in the specified order. A backend must specify, at least, a set of default arguments for these parameters.</p>
<p>Backends can require extra parameters beyond the base requirements. If a backend requires extra parameters, these must have default values in every set of default arguments for the workload parameters. Extra workload parameters are always listed after the set of required parameters.</p>
<h1><a class="anchor" id="autotoc_md233"></a>
Categories</h1>
<p>This workload supports the following categories:</p>
<div class="fragment"><div class="line"><a class="code" href="namespacehebench.html">hebench</a>:<a class="code" href="namespacehebench_1_1APIBridge.html#a342c85b5dfa15ef7f8189791d1931653af20494a75b1d43030db60eae8b8c367d">APIBridge::Category::Latency</a></div>
<div class="line"><a class="code" href="namespacehebench.html">hebench</a>:<a class="code" href="namespacehebench_1_1APIBridge.html#a342c85b5dfa15ef7f8189791d1931653adc6bcebb0fd84672c6ece08d096e774c">APIBridge::Category::Offline</a></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a342c85b5dfa15ef7f8189791d1931653adc6bcebb0fd84672c6ece08d096e774c"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a342c85b5dfa15ef7f8189791d1931653adc6bcebb0fd84672c6ece08d096e774c">hebench::APIBridge::Offline</a></div><div class="ttdeci">@ Offline</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00399">types.h:398</a></div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a342c85b5dfa15ef7f8189791d1931653af20494a75b1d43030db60eae8b8c367d"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a342c85b5dfa15ef7f8189791d1931653af20494a75b1d43030db60eae8b8c367d">hebench::APIBridge::Latency</a></div><div class="ttdeci">@ Latency</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00393">types.h:393</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md234"></a>
Category Parameters</h2>
<h3>Latency</h3>
<p>See <a class="el" href="category_latency.html">Latency Category</a> .</p>
<h3>Offline</h3>
<p>See <a class="el" href="category_offline.html">Offline Category</a> .</p>
<p>Value ranges for elements in <code>CategoryParams::offline::data_count</code>. Default value is used when the backend implementation sets the <code>data_count</code> for the corresponding operand to <code>0</code>, but user specified <code>0</code> or no value at run-time.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Lower bound   </th><th class="markdownTableHeadNone">Upper bound   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>i</code>   </td><td class="markdownTableBodyNone"><code>1</code>   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone"><code>1</code>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md235"></a>
Data Type</h1>
<p>The data type defines the type for the scalar elements in each vector of the input and the output.</p>
<p>This workload is defined for the following data types:</p>
<div class="fragment"><div class="line"><a class="code" href="namespacehebench_1_1APIBridge.html#a29da34e3db6e0aadc9d1717a12d148ffa7c7ea6f96f1cad698c12a882cce1d4bf">hebench::APIBridge::DataType::Int32</a></div>
<div class="line"><a class="code" href="namespacehebench_1_1APIBridge_1_1WorkloadParamType.html#a58efab5fc8c4b9947767b255cee40cc6a20d47c01824eb3a053e626adf45f3a0e">hebench::APIBridge::DataType::Int64</a></div>
<div class="line"><a class="code" href="namespacehebench_1_1APIBridge.html#a29da34e3db6e0aadc9d1717a12d148ffa05edaefa09dd9f7e755fb21da78a76d1">hebench::APIBridge::DataType::Float32</a></div>
<div class="line"><a class="code" href="namespacehebench_1_1APIBridge_1_1WorkloadParamType.html#a58efab5fc8c4b9947767b255cee40cc6a006162743899dfe6821ed4b3da6ca38d">hebench::APIBridge::DataType::Float64</a></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_1_1WorkloadParamType_html_a58efab5fc8c4b9947767b255cee40cc6a006162743899dfe6821ed4b3da6ca38d"><div class="ttname"><a href="namespacehebench_1_1APIBridge_1_1WorkloadParamType.html#a58efab5fc8c4b9947767b255cee40cc6a006162743899dfe6821ed4b3da6ca38d">hebench::APIBridge::WorkloadParamType::Float64</a></div><div class="ttdeci">@ Float64</div><div class="ttdoc">64 bits IEEE 754 standard floating point real numbers.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00307">types.h:306</a></div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_1_1WorkloadParamType_html_a58efab5fc8c4b9947767b255cee40cc6a20d47c01824eb3a053e626adf45f3a0e"><div class="ttname"><a href="namespacehebench_1_1APIBridge_1_1WorkloadParamType.html#a58efab5fc8c4b9947767b255cee40cc6a20d47c01824eb3a053e626adf45f3a0e">hebench::APIBridge::WorkloadParamType::Int64</a></div><div class="ttdeci">@ Int64</div><div class="ttdoc">64 bits signed integers.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00304">types.h:304</a></div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a29da34e3db6e0aadc9d1717a12d148ffa05edaefa09dd9f7e755fb21da78a76d1"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a29da34e3db6e0aadc9d1717a12d148ffa05edaefa09dd9f7e755fb21da78a76d1">hebench::APIBridge::Float32</a></div><div class="ttdeci">@ Float32</div><div class="ttdoc">32 bits IEEE 754 standard floating point real numbers.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00382">types.h:382</a></div></div>
<div class="ttc" id="anamespacehebench_1_1APIBridge_html_a29da34e3db6e0aadc9d1717a12d148ffa7c7ea6f96f1cad698c12a882cce1d4bf"><div class="ttname"><a href="namespacehebench_1_1APIBridge.html#a29da34e3db6e0aadc9d1717a12d148ffa7c7ea6f96f1cad698c12a882cce1d4bf">hebench::APIBridge::Int32</a></div><div class="ttdeci">@ Int32</div><div class="ttdoc">32 bits signed integers.</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00380">types.h:380</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md236"></a>
Data Layout</h1>
<p>All scalar elements in a vector with elements of type <code>T</code> (where <code>T</code> is any of the supported types) lie contiguous in memory.</p>
<p>For example, given the following vector <code>Z</code> with <code>n = 3</code> components:</p>
<div class="fragment"><div class="line">Z = [ a0, a1, a2 ]</div>
</div><!-- fragment --><p>The elements will be stored in memory as:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Offset:   </th><th class="markdownTableHeadNone">0   </th><th class="markdownTableHeadNone">1   </th><th class="markdownTableHeadNone">2    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Z   </td><td class="markdownTableBodyNone"><code>z0</code>   </td><td class="markdownTableBodyNone"><code>z1</code>   </td><td class="markdownTableBodyNone"><code>z2</code>   </td></tr>
</table>
<p>Backends should expect this layout for their raw, clear text inputs, and must generate this layout for their decoded outputs.</p>
<p>External datasets must provide their data for every input and output in a way that after going through the loading process as specified by the corresponding data loader, the data is laid out in memory in the aforementioned format as well.</p>
<h3>Notes</h3>
<p>If several vectors will be pointed at by a single pointer, consecutive vectors will follow each other in memory.</p>
<h1><a class="anchor" id="autotoc_md237"></a>
Dataset</h1>
<p>Supported modes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Generate   </th><th class="markdownTableHeadNone">External    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">no   </td><td class="markdownTableBodyNone">yes   </td></tr>
</table>
<p>Synthetic data cannot be generated for a generic workload since the <code>op</code> function is explicitly defined. If no dataset is provided in the benchmark configuration file, the benchmark initialization fails with an error.</p>
<h1><a class="anchor" id="autotoc_md238"></a>
Example</h1>
<p>For our purpose, let's assume that the function we want to benchmark maps <code>(InputParam[0], InputParam[1])</code> to <code>(ResultComponent[0], ResultComponent[1], ResultComponent[2])</code> where <code>InputParam[0]</code> is a vector with two components, <code>InputParam[1]</code> is a vector with two components as well and:</p>
<div class="fragment"><div class="line">ResultComponent[0] = InputParam[0] + InputParam[1]</div>
<div class="line">ResultComponent[1] = InputParam[0] - InputParam[1]</div>
<div class="line">ResultComponent[2] = InputParam[0] . InputParam[1] <span class="comment">// dot product</span></div>
</div><!-- fragment --><p>Let's also assume that we want to test in <em>offline</em> category using a dataset with <code>2</code> samples for <code>InputParam[0]</code> and <code>5</code> samples for <code>InputParam[1]</code>.</p>
<p>This is an example of a function that is not supported by the standard workloads in HEBench. It is a good candidate to be implemented as a generic workload to measure the performance of our backend implementation.</p>
<p>See <a class="el" href="generic_wl_example.html">Generic Workload Example</a> for a tutorial implementing this example. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
